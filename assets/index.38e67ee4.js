var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(n,l)=>{var a={};for(var r in n)t.call(n,r)&&l.indexOf(r)<0&&(a[r]=n[r]);if(null!=n&&e)for(var r of e(n))l.indexOf(r)<0&&s.call(n,r)&&(a[r]=n[r]);return a};import{d as l,p as a,a as r,c as o,n as i,w as d,t as u,b as c,F as m,o as h,r as p,e as y,f,i as v,g,h as b,T as k,j as E,k as L,l as O,m as $,q as C}from"./vendor.01afd33b.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var w=l({name:"FieldWrapper",props:{label:String,modelValue:null,fieldId:String},emits:["onMove","onEvaluate","onDelete","onSetSign","update:modelValue"],methods:{handleInput(e){this.$emit("update:modelValue",+e.target.value)},handleKeypress(e){switch(`${e.ctrlKey?"Ctrl ":""}${e.key}`){case"Ctrl Enter":this.$emit("onEvaluate");break;case"Ctrl Delete":this.$emit("onDelete");break;case"+":case"-":e.preventDefault(),this.$emit("onSetSign",e.key);break;case"Ctrl ArrowUp":case"Ctrl ArrowDown":case"Ctrl ArrowLeft":case"Ctrl ArrowRight":this.$emit("onMove",[e,e.key.toLowerCase().replace("arrow","")]);break;case"Ctrl a":case"Tab":case"Backspace":case"Delete":case"Home":case"End":break;default:if(!/[^0-9]/.test(e.key))break;e.preventDefault()}}},computed:{dynamicWidth(){return this.modelValue&&this.modelValue.length>3?`${this.modelValue.length+.5}rem`:"4rem"},isSign(){return"-"===this.modelValue||"+"===this.modelValue}}});a("data-v-0295041a");const x=["id","value"],V={key:1,class:"sign"};r(),w.render=function(e,t,s,n,l,a){return h(),o(m,null,[e.isSign?(h(),o("div",V,u(e.modelValue),1)):(h(),o("input",{key:0,class:"input",type:"tel",id:e.fieldId,style:i({width:e.dynamicWidth}),value:e.modelValue,onInput:t[0]||(t[0]=(...t)=>e.handleInput&&e.handleInput(...t)),onKeydown:[t[1]||(t[1]=d(((...t)=>e.handleKeypress&&e.handleKeypress(...t)),["exact"])),t[2]||(t[2]=d(((...t)=>e.handleKeypress&&e.handleKeypress(...t)),["ctrl","exact"])),t[3]||(t[3]=d(((...t)=>e.handleKeypress&&e.handleKeypress(...t)),["shift","exact"]))]},null,44,x)),c(" "+u(e.label),1)],64)},w.__scopeId="data-v-0295041a";var M=l({name:"TimeEntry",components:{FieldWrapper:w},props:{index:{type:Number,required:!0},initialEntry:{type:Object,required:!0}},emits:["onEvaluate","deleteEntry","update:modelValue","changeLine"],data:()=>({entry:{},labels:{sign:"",days:"days",hours:"h",minutes:"min",seconds:"s"}}),mounted(){this.entry=this.initialEntry},methods:{moveCursor(e,t,s){switch(t){case"up":case"down":this.$emit("changeLine",t,s,this.index);break;case"left":this.$nextTick((()=>{var t;(null==(t=e.target)?void 0:t.previousElementSibling).focus()}));break;case"right":this.$nextTick((()=>{e.target.nextElementSibling.focus()}))}}}});M.render=function(e,t,s,n,l,a){const r=p("FieldWrapper");return h(!0),o(m,null,y(e.entry,((s,n)=>(h(),f(r,{label:e.labels[n],key:`${n}-${e.index}`,fieldId:`${n}-${e.index}`,modelValue:e.entry[n],"onUpdate:modelValue":t=>e.entry[n]=t,onOnSetSign:t[0]||(t[0]=t=>e.entry.sign=t),onOnMove:t=>e.moveCursor(t[0],t[1],n),onOnEvaluate:t[1]||(t[1]=t=>e.$emit("onEvaluate")),onOnDelete:t=>e.$emit("deleteEntry",n,e.index)},null,8,["label","fieldId","modelValue","onUpdate:modelValue","onOnMove","onOnDelete"])))),128)};var S=l({name:"EntryList",components:{TimeEntry:M},emits:["onEvaluate"],data:()=>({entryList:[{sign:"+",days:0,hours:0,minutes:0,seconds:0}]}),methods:{evaluate(){let e=new v.exports.Temporal.Duration;for(const s of this.entryList){const t=s,{sign:l}=t,a=n(t,["sign"]);e="+"===s.sign?e.add(a):e.subtract(a),e=e.round({largestUnit:"day",smallestUnit:"second"})}const t={days:e.days,hours:e.hours,minutes:e.minutes,seconds:e.seconds};this.$emit("onEvaluate",t)},deleteEntry(e,t){1!==this.entryList.length&&(0==+t?this.changeLine("down",e,t+1):this.changeLine("up",e,t),this.entryList.splice(t,1))},changeLine(e,t,s){const n={sign:"+",days:0,hours:0,minutes:0,seconds:0},l=s===this.entryList.length-1,a=0===s,r="down"===e,o="up"===e;let i=!1,d="";if((l&&r||a&&o)&&this.isEntryEmpty(s))return;r&&(d=`#${t}-${s+1}`,l&&(this.entryList.push(n),i=!0)),o&&(d=`#${t}-${s-1}`,a&&(d=`#${t}-${s}`,this.entryList.unshift(n),i=!0));const u=this.$refs.entryListForm;i?this.$nextTick((()=>{u.querySelector(d).focus()})):u.querySelector(d).focus()},isEntryEmpty(e){const t=this.entryList[e],{sign:s}=t,l=n(t,["sign"]);return v.exports.Temporal.Duration.from(l).blank}}});a("data-v-1815d015");const T={ref:"entryListForm"};r(),S.render=function(e,t,s,n,l,a){const r=p("TimeEntry");return h(),o("form",T,[(h(!0),o(m,null,y(e.entryList,((t,s)=>(h(),o("fieldset",{class:"entry",key:s},[g(r,{modelValue:e.entryList[s],"onUpdate:modelValue":t=>e.entryList[s]=t,initialEntry:t,index:s,key:s,onOnEvaluate:e.evaluate,onChangeLine:e.changeLine},null,8,["modelValue","onUpdate:modelValue","initialEntry","index","onOnEvaluate","onChangeLine"])])))),128))],512)},S.__scopeId="data-v-1815d015";var D=l({name:"ModalBase",props:{isOpen:{type:Boolean,required:!0,default:!1}},emits:["closeModal"]});a("data-v-143b6b76");const I={key:0,class:"modal"},K=L("h1",null,"Controls",-1),j=L("div",{class:"divider"},null,-1),U=L("main",null,[L("ul",null,[L("li",{class:"item lv1"},[L("code",null,"Ctrl + Directional Arrows"),c(" - Movement between fields, creates new entries as needed "),L("ul",null,[L("li",{class:"item lv2"},[c(" Usual form movement works as well ("),L("code",null,"Tab"),c(" and "),L("code",null,"Shift + Tab"),c(") ")])])]),L("li",{class:"item lv1"},[L("code",null,"Ctrl + Enter"),c(" - Evaluates the result ")]),L("li",{class:"item lv1"},[L("code",null,"Ctrl + Delete"),c(" - Removes the currently selected entry from the list ")])])],-1);r(),D.render=function(e,t,s,n,l,a){return h(),f(E,{to:"#modal-anchor"},[g(k,{name:"fade"},{default:b((()=>[e.isOpen?(h(),o("div",I,[L("header",null,[K,L("button",{type:"button",onClick:t[0]||(t[0]=t=>e.$emit("closeModal"))},"X")]),j,U])):O("",!0)])),_:1}),g(k,{name:"fade"},{default:b((()=>[e.isOpen?(h(),o("div",{key:0,class:"backdrop",onClick:t[1]||(t[1]=t=>e.$emit("closeModal"))})):O("",!0)])),_:1})])},D.__scopeId="data-v-143b6b76";var _=l({name:"App",components:{EntryList:S,ControlsModal:D},data:()=>({isModalOpen:!1,result:""}),methods:{updateResult(e){let t=Object.values(e).filter((e=>e>0)).length;this.result="",e.days&&(t--,this.result+=e.days+" days",1==t?this.result+=" and":t>1&&(this.result+=",")),e.hours&&(t--,this.result+=" "+e.hours+" hours",1==t?this.result+=" and":t>1&&(this.result+=",")),e.minutes&&(t--,this.result+=" "+e.minutes+" minutes",1==t?this.result+=" and":t>1&&(this.result+=",")),e.seconds&&(t--,this.result+=" "+e.seconds+" seconds")}}});const q={class:"container"},A={class:"centered"},F={class:"site-title"},W=c(" Time Calculator "),N=L("div",{class:"hbar"},null,-1),P={key:0,class:"result"},R=$('<footer class="footer"><div class="line"><a href="https://github.com/peruibeloko/time-calculator" class="source-link">Check the source here!</a><span class="separator">·</span><a href="https://github.com/peruibeloko" class="source-link">Check my other projects here!</a></div><div class="line"><small>Powered by the highly experimental, bleeding-edge, <a href="https://tc39.es/proposal-temporal/docs/" class="source-link">Temporal Object</a> proposal by TC39 </small></div></footer>',1);_.render=function(e,t,s,n,l,a){const r=p("ControlsModal"),i=p("EntryList");return h(),o(m,null,[g(r,{isOpen:e.isModalOpen,onCloseModal:t[0]||(t[0]=t=>e.isModalOpen=!1)},null,8,["isOpen"]),L("div",q,[L("header",A,[L("h1",F,[W,L("span",{class:"info",onClick:t[1]||(t[1]=t=>e.isModalOpen=!0)},"ⓘ")])]),L("main",null,[g(i,{onOnEvaluate:e.updateResult},null,8,["onOnEvaluate"]),N,L("section",null,[e.result?(h(),o("h1",P,"Thats "+u(e.result),1)):O("",!0)])]),R])],64)},C(_).mount("#app");
